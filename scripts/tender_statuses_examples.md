# –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫—É–ø–∫–∞–º

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –î–∞–Ω–Ω—ã–µ –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è!

–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ **–ù–ï —É–¥–∞–ª—è–µ—Ç** –Ω–∏–∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î. –û–Ω —Ç–æ–ª—å–∫–æ:
- –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É `tender_statuses`
- –î–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç–æ–ª–±–µ—Ü `status_id` –≤ —Ç–∞–±–ª–∏—Ü—ã –∑–∞–∫—É–ø–æ–∫
- **–û–±–Ω–æ–≤–ª—è–µ—Ç** (UPDATE) –∑–Ω–∞—á–µ–Ω–∏—è `status_id` –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π
- –°–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ë–î, –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ—á–∞—é—Ç—Å—è —Å—Ç–∞—Ç—É—Å–∞–º–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞.

---

## üìä –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫—É–ø–æ–∫

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|----------|----------|
| 1 | –ù–æ–≤–∞—è | –ó–∞–∫—É–ø–∫–∞ —Å end_date NOT NULL –∏ end_date <= CURRENT_DATE (–∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –¥–æ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã) |
| 2 | –†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏ | –ó–∞–∫—É–ø–∫–∞ —Å end_date > CURRENT_DATE –∏ end_date <= CURRENT_DATE + 90 –¥–Ω–µ–π (–∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–∏–µ 90 –¥–Ω–µ–π) |
| 3 | –†–∞–∑—ã–≥—Ä–∞–Ω–∞ | –ó–∞–∫—É–ø–∫–∞ —Å delivery_end_date NOT NULL –∏ delivery_end_date >= CURRENT_DATE + 90 –¥–Ω–µ–π (–∫–æ–Ω–µ—Ü –ø–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ —Ä–∞–Ω–µ–µ —á–µ–º —á–µ—Ä–µ–∑ 90 –¥–Ω–µ–π) |
| 4 | –ü–ª–æ—Ö–∏–µ | –ó–∞–∫—É–ø–∫–∞ —Å delivery_end_date IS NULL (44–§–ó) –∏–ª–∏ end_date > CURRENT_DATE + 180 –¥–Ω–µ–π (223–§–ó) |

---

## üìã –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–ª—è 44–§–ó

### –ü—Ä–∏–º–µ—Ä 1: –°—Ç–∞—Ç—É—Å "–ù–æ–≤–∞—è"

**–£—Å–ª–æ–≤–∏–µ:** `end_date IS NOT NULL AND end_date <= CURRENT_DATE`

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π:**

| id | contract_number | end_date | delivery_end_date | status_id |
|----|----------------|----------|-------------------|-----------|
| 1001 | –ö-2024-001 | 2024-12-01 | NULL | **1** (–ù–æ–≤–∞—è) |
| 1002 | –ö-2024-002 | 2024-12-05 | NULL | **1** (–ù–æ–≤–∞—è) |
| 1003 | –ö-2024-003 | 2024-11-30 | NULL | **1** (–ù–æ–≤–∞—è) |

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ó–∞–∫—É–ø–∫–∞ —É–∂–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å (end_date –≤ –ø—Ä–æ—à–ª–æ–º –∏–ª–∏ —Å–µ–≥–æ–¥–Ω—è), –Ω–æ –µ—â–µ –Ω–µ —Ä–∞–∑—ã–≥—Ä–∞–Ω–∞ (delivery_end_date = NULL).

---

### –ü—Ä–∏–º–µ—Ä 2: –°—Ç–∞—Ç—É—Å "–†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏"

**–£—Å–ª–æ–≤–∏–µ:** `end_date IS NOT NULL AND end_date > CURRENT_DATE AND end_date <= CURRENT_DATE + 90 –¥–Ω–µ–π`

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π (—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞: 2024-12-05):**

| id | contract_number | end_date | delivery_end_date | status_id |
|----|----------------|----------|-------------------|-----------|
| 2001 | –ö-2024-100 | 2024-12-10 | NULL | **2** (–†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏) |
| 2002 | –ö-2024-101 | 2024-12-20 | NULL | **2** (–†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏) |
| 2003 | –ö-2024-102 | 2025-01-15 | NULL | **2** (–†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏) |
| 2004 | –ö-2024-103 | 2025-03-01 | NULL | **2** (–†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏) |
| 2005 | –ö-2024-104 | 2025-04-01 | NULL | **–ù–ï –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è** (—Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ) |

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ó–∞–∫—É–ø–∫–∞ –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–∏–µ 90 –¥–Ω–µ–π. –ö–æ–º–∏—Å—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ –æ—Ü–µ–Ω–∫–æ–π –∑–∞—è–≤–æ–∫.

---

### –ü—Ä–∏–º–µ—Ä 3: –°—Ç–∞—Ç—É—Å "–†–∞–∑—ã–≥—Ä–∞–Ω–∞"

**–£—Å–ª–æ–≤–∏–µ:** `delivery_end_date IS NOT NULL AND delivery_end_date >= CURRENT_DATE + 90 –¥–Ω–µ–π`

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π (—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞: 2025-12-05):**

| id | contract_number | end_date | delivery_end_date | status_id |
|----|----------------|----------|-------------------|-----------|
| 3001 | –ö-2024-200 | 2024-11-01 | 2026-03-10 | **3** (–†–∞–∑—ã–≥—Ä–∞–Ω–∞) |
| 3002 | –ö-2024-201 | 2024-10-15 | 2026-04-15 | **3** (–†–∞–∑—ã–≥—Ä–∞–Ω–∞) |
| 3003 | –ö-2024-202 | 2024-09-20 | 2026-02-20 | **3** (–†–∞–∑—ã–≥—Ä–∞–Ω–∞) |
| 3004 | –ö-2024-203 | 2024-08-01 | 2026-01-01 | **3** (–†–∞–∑—ã–≥—Ä–∞–Ω–∞) |
| 3005 | –ö-2024-204 | 2024-11-01 | 2026-01-10 | **–ù–ï –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è** (delivery_end_date –º–µ–Ω—å—à–µ —á–µ–º +90 –¥–Ω–µ–π) |

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ó–∞–∫—É–ø–∫–∞ —Ä–∞–∑—ã–≥—Ä–∞–Ω–∞, –µ—Å—Ç—å –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ—Å—Ç–∞–≤–∫–∏, –∏ –æ–Ω–∞ –Ω–µ —Ä–∞–Ω–µ–µ —á–µ–º —á–µ—Ä–µ–∑ 90 –¥–Ω–µ–π –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã (delivery_end_date >= CURRENT_DATE + 90 –¥–Ω–µ–π).

---

### –ü—Ä–∏–º–µ—Ä 4: –°—Ç–∞—Ç—É—Å "–ü–ª–æ—Ö–∏–µ"

**–£—Å–ª–æ–≤–∏–µ:** `delivery_end_date IS NULL`

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π:**

| id | contract_number | end_date | delivery_end_date | status_id |
|----|----------------|----------|-------------------|-----------|
| 4001 | –ö-2024-300 | 2024-11-01 | NULL | **4** (–ü–ª–æ—Ö–∏–µ) |
| 4002 | –ö-2024-301 | 2024-10-15 | NULL | **4** (–ü–ª–æ—Ö–∏–µ) |
| 4003 | –ö-2024-302 | NULL | NULL | **4** (–ü–ª–æ—Ö–∏–µ) |

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ó–∞–∫—É–ø–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å, –Ω–æ –Ω–µ—Ç –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ—Å—Ç–∞–≤–∫–∏ (delivery_end_date = NULL). –≠—Ç–æ "–±–∏—Ç—ã–µ" –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø–æ–∏—Å–∫–µ.

---

## üìã –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–ª—è 223–§–ó

### –ü—Ä–∏–º–µ—Ä 1: –°—Ç–∞—Ç—É—Å "–ü–ª–æ—Ö–∏–µ"

**–£—Å–ª–æ–≤–∏–µ:** `end_date IS NOT NULL AND end_date > CURRENT_DATE + 180 –¥–Ω–µ–π`

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π (—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞: 2024-12-05):**

| id | contract_number | end_date | status_id |
|----|----------------|----------|-----------|
| 5001 | –ö-223-001 | 2025-06-10 | **4** (–ü–ª–æ—Ö–∏–µ) |
| 5002 | –ö-223-002 | 2025-07-15 | **4** (–ü–ª–æ—Ö–∏–µ) |
| 5003 | –ö-223-003 | 2025-12-20 | **–ù–ï –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è** (–º–µ–Ω—å—à–µ 180 –¥–Ω–µ–π) |

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ó–∞–∫—É–ø–∫–∞ —Å –¥–∞—Ç–æ–π –æ–∫–æ–Ω—á–∞–Ω–∏—è –±–æ–ª–µ–µ —á–µ–º —á–µ—Ä–µ–∑ 180 –¥–Ω–µ–π –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ "–ü–ª–æ—Ö–∏–µ" –∏ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø–æ–∏—Å–∫–µ.

---

### –ü—Ä–∏–º–µ—Ä 2: –ë–µ–∑ —Å—Ç–∞—Ç—É—Å–∞ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ)

**–£—Å–ª–æ–≤–∏–µ:** –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–Ω–µ –ø–æ–ø–∞–¥–∞—é—â–∏–µ –ø–æ–¥ —É—Å–ª–æ–≤–∏–µ "–ü–ª–æ—Ö–∏–µ")

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π (—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞: 2024-12-05):**

| id | contract_number | end_date | status_id |
|----|----------------|----------|-----------|
| 6001 | –ö-223-100 | 2024-12-10 | **NULL** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ) |
| 6002 | –ö-223-101 | 2025-01-15 | **NULL** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ) |
| 6003 | –ö-223-102 | 2025-05-01 | **NULL** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ) |
| 6004 | –ö-223-103 | NULL | **NULL** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ) |

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –í—Å–µ –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ "–ü–ª–æ—Ö–∏–µ", –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ —Å—Ç–∞—Ç—É—Å–∞ (status_id = NULL) –∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø–æ–∏—Å–∫–µ.

---

## üîç –ö–∞–∫ —ç—Ç–æ —É—Å–∫–æ—Ä–∏—Ç –ø–æ–∏—Å–∫?

### –î–æ –º–∏–≥—Ä–∞—Ü–∏–∏:
```sql
-- –ü–æ–∏—Å–∫ –Ω–æ–≤—ã—Ö –∑–∞–∫—É–ø–æ–∫ 44–§–ó (–º–µ–¥–ª–µ–Ω–Ω–æ, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏)
SELECT * FROM reestr_contract_44_fz
WHERE end_date IS NOT NULL 
  AND end_date <= CURRENT_DATE
  AND delivery_end_date IS NULL;
-- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç 22 –º–ª–Ω –∑–∞–ø–∏—Å–µ–π!
```

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
```sql
-- –ü–æ–∏—Å–∫ –Ω–æ–≤—ã—Ö –∑–∞–∫—É–ø–æ–∫ 44–§–ó (–±—ã—Å—Ç—Ä–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å –ø–æ status_id)
SELECT * FROM reestr_contract_44_fz
WHERE status_id = 1;  -- –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å "–ù–æ–≤–∞—è"
-- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 1 (–Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ –∑–∞–ø–∏—Å–µ–π!)
```

### –ò—Å–∫–ª—é—á–µ–Ω–∏–µ "–ø–ª–æ—Ö–∏—Ö" –∑–∞–ø–∏—Å–µ–π:

**–î–ª—è 44–§–ó:**
```sql
-- –ò—Å–∫–ª—é—á–∞–µ–º —Å—Ç–∞—Ç—É—Å "–ü–ª–æ—Ö–∏–µ" (status_id = 4)
SELECT * FROM reestr_contract_44_fz
WHERE status_id IN (1, 2, 3);  -- –ù–æ–≤–∞—è, –†–∞–±–æ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏, –†–∞–∑—ã–≥—Ä–∞–Ω–∞
```

**–î–ª—è 223–§–ó:**
```sql
-- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ –±–µ–∑ —Å—Ç–∞—Ç—É—Å–∞ –∏–ª–∏ —Å —Ö–æ—Ä–æ—à–∏–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
SELECT * FROM reestr_contract_223_fz
WHERE status_id IS NULL OR status_id != 4;
```

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ë–î (–Ω–∏—á–µ–≥–æ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è)
- ‚úÖ –ó–∞–ø–∏—Å–∏ –ø–æ–º–µ—á–∞—é—Ç—Å—è —Å—Ç–∞—Ç—É—Å–∞–º–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ "–ü–ª–æ—Ö–∏–µ" –∑–∞–ø–∏—Å–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω–¥–µ–∫—Å–∞–º –ø–æ status_id
- ‚úÖ –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∑–∞–∫—É–ø–æ–∫

