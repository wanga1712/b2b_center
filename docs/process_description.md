# –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ç–æ—Ä–≥–æ–≤

## üìã –û–±—â–∏–π –æ–±–∑–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞

–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ç–æ—Ä–≥–æ–≤ (44–§–ó –∏ 223–§–ó) –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ—Ü–µ—Å—Å –≤–∫–ª—é—á–∞–µ—Ç: —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, —Ä–∞—Å–ø–∞–∫–æ–≤–∫—É –∞—Ä—Ö–∏–≤–æ–≤, –ø–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π —Ñ—Ä–∞–∑ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î.

---

## üîÑ –ü–û–õ–ù–´–ô –¶–ò–ö–õ –û–ë–†–ê–ë–û–¢–ö–ò

### 1. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –ó–ê–ü–£–°–ö

**–§–∞–π–ª—ã:**
- `modules/bids/widget.py` - UI –≤–∏–¥–∂–µ—Ç –∑–∞–∫—É–ø–æ–∫
- `modules/bids/document_processor.py` - –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `scripts/run_document_processing.py` - –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ê–Ω–∞–ª–∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö" –∏–ª–∏ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ" –≤ `BidsWidget`
2. `DocumentProcessor.process_selected_tenders()` –∏–ª–∏ `process_all_tenders()` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `scripts/run_document_processing.py` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
   - `--tenders "44fz:123,456 223fz:789"` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–∫—É–ø–∫–∏
   - `--user-id 1` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `--all-after-priority` - —Ñ–ª–∞–≥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –ø–æ—Å–ª–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö
   - `--registry-type 44fz|223fz` - —Ç–∏–ø —Ä–µ–µ—Å—Ç—Ä–∞
   - `--tender-type new|won` - —Ç–∏–ø —Ç–æ—Ä–≥–æ–≤

---

### 2. –ü–û–õ–£–ß–ï–ù–ò–ï –°–ü–ò–°–ö–ê –¢–û–†–ì–û–í

**–§–∞–π–ª—ã:**
- `services/archive_runner/runner.py` - `ArchiveBackgroundRunner.run()`
- `services/archive_runner/tender_provider.py` - `TenderProvider.get_target_tenders()`
- `services/tender_repository.py` - `TenderRepository._fetch_new_feed()`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. `ArchiveBackgroundRunner.run()` –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ—Ä–≥–æ–≤:
   - –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã `specific_tender_ids` - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–∫—É–ø–∫–∏
   - –ò–Ω–∞—á–µ - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–û–ö–ü–î –∫–æ–¥—ã, —Å—Ç–æ–ø-—Å–ª–æ–≤–∞, —Ä–µ–≥–∏–æ–Ω, –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
2. `TenderProvider.get_target_tenders()` –≤—ã–∑—ã–≤–∞–µ—Ç `TenderRepository._fetch_new_feed()`
3. –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è SQL –∑–∞–ø—Ä–æ—Å —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
   - –û–ö–ü–î –∫–æ–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`user_okpd_codes`)
   - –°—Ç–æ–ø-—Å–ª–æ–≤–∞ (`user_stop_words`)
   - –†–µ–≥–∏–æ–Ω (`region_id`)
   - –ö–∞—Ç–µ–≥–æ—Ä–∏—è –û–ö–ü–î (`category_id`)
   - **–í–ê–ñ–ù–û: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤** - —á–µ—Ä–µ–∑ `TenderQueryBuilder.build_is_interesting_filter()`:
     ```sql
     AND NOT EXISTS (
         SELECT 1 FROM tender_document_matches tdm_filter
         WHERE tdm_filter.tender_id = r.id 
         AND tdm_filter.registry_type = '{registry_type}'
         AND tdm_filter.is_interesting = FALSE
     )
     ```
     –≠—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—Å–µ —Ç–æ—Ä–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `is_interesting = FALSE`
4. –ü–æ–ª—É—á–∞—é—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ—Ä–≥–∞ —á–µ—Ä–µ–∑ `TenderDocumentsRepository`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –¥–∞–Ω–Ω—ã–º–∏ —Ç–æ—Ä–≥–æ–≤, –≤–∫–ª—é—á–∞—è `document_links`. **–ù–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ç–æ—Ä–≥–∏ (is_interesting = FALSE) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ SQL –∑–∞–ø—Ä–æ—Å–∞.**

---

### 3. –°–ö–ê–ß–ò–í–ê–ù–ò–ï –§–ê–ô–õ–û–í

**–§–∞–π–ª—ã:**
- `services/document_search/document_downloader.py` - `DocumentDownloader`
- `services/archive_runner/tender_prefetcher.py` - `TenderPrefetcher`
- `services/archive_runner/tender_processor.py` - `TenderProcessor._build_download_records()`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. **–í—ã–±–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:**
   - `DocumentSelector.choose_documents()` –≤—ã–±–∏—Ä–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã:
     - **–ë–ï–ó –ü–†–ò–û–†–ò–¢–ï–¢–ê - –∫–∞—á–∞—é—Ç—Å—è –í–°–ï –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –∞—Ä—Ö–∏–≤—ã:**
       - –í—Å–µ Excel —Ñ–∞–π–ª—ã (.xlsx, .xls)
       - –í—Å–µ –∞—Ä—Ö–∏–≤—ã (.rar, .zip, .7z)
       - –í—Å–µ Word –¥–æ–∫—É–º–µ–Ω—Ç—ã (.docx, .doc)
       - –í—Å–µ PDF —Ñ–∞–π–ª—ã
     - –î–æ–∫—É–º–µ–Ω—Ç—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ (Excel ‚Üí –∞—Ä—Ö–∏–≤—ã ‚Üí –æ—Å—Ç–∞–ª—å–Ω—ã–µ)
     - **–ù–ï –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è** –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —Å—Ç–æ–ø-—Å–ª–æ–≤–∞–º–∏ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ)
     - –ì—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –º–Ω–æ–≥–æ—á–∞—Å—Ç–Ω—ã–µ –∞—Ä—Ö–∏–≤—ã (—á—Ç–æ–±—ã –Ω–µ —Å–∫–∞—á–∏–≤–∞—Ç—å —á–∞—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)

2. **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
   - `DocumentDownloader.download_document()`:
     - –§–æ—Ä–º–∏—Ä—É–µ—Ç URL –∏–∑ `document_links`
     - –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Ç–æ—Ä–≥–∞: `download_dir / tender_{id}_{registry_type}`
     - –°–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 1MB –∏–ª–∏ 5%)
     - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å –æ—á–∏—â–µ–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º —Ñ–∞–π–ª–∞ (—É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤)

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–≥–æ—á–∞—Å—Ç–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤:**
   - `DocumentDownloader._collect_related_archives()`:
     - –ò—â–µ—Ç –≤—Å–µ —á–∞—Å—Ç–∏ –∞—Ä—Ö–∏–≤–∞ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É –∏–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `archive.part1.rar`, `archive.part2.rar`)
     - –°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ —á–∞—Å—Ç–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
   - `DocumentDownloader.download_required_documents()`:
     - –°–∫–∞—á–∏–≤–∞–µ—Ç –≤—Å–µ —á–∞—Å—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–±–∞—Ç—á–∞–º–∏ –ø–æ 8 —Ñ–∞–π–ª–æ–≤)
     - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ThreadPoolExecutor` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π –∫ —Å–∫–∞—á–∞–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º (`List[Path]`)

---

### 4. –†–ê–°–ü–ê–ö–û–í–ö–ê –ê–†–•–ò–í–û–í

**–§–∞–π–ª—ã:**
- `services/document_search/archive_extractor.py` - `ArchiveExtractor`
- `services/archive_runner/archive_processor.py` - `ArchiveProcessor`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∞—Ä—Ö–∏–≤–∞:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è: `.rar`, `.zip`, `.7z`
   - –î–ª—è RAR: –ø—Ä–æ–≤–µ—Ä–∫–∞ magic bytes (`Rar!`)
   - –î–ª—è 7Z: –ø—Ä–æ–≤–µ—Ä–∫–∞ magic bytes (`7z`)

2. **–°–∫–ª–µ–π–∫–∞ –º–Ω–æ–≥–æ—á–∞—Å—Ç–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
   - `ArchiveExtractor.combine_multi_part_archive()`:
     - –ï—Å–ª–∏ –∞—Ä—Ö–∏–≤ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ - —Å–∫–ª–µ–∏–≤–∞–µ—Ç –∏—Ö –≤ –æ–¥–∏–Ω
     - –°–æ—Ä—Ç–∏—Ä—É–µ—Ç —á–∞—Å—Ç–∏ –ø–æ –Ω–æ–º–µ—Ä—É (`.part1`, `.part2`, ...)
     - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ —Ñ–∞–π–ª `{base_name}_combined.{suffix}`

3. **–†–∞—Å–ø–∞–∫–æ–≤–∫–∞:**
   - **ZIP:** `_extract_zip_archive()`:
     - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `zipfile.ZipFile`
     - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫–∏ (cp437 -> cp866 –¥–ª—è —Ä—É—Å—Å–∫–∏—Ö –∏–º–µ–Ω)
   - **RAR:** `_extract_rar_archive()`:
     - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–Ω–µ—à–Ω–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç UnRAR (—á–µ—Ä–µ–∑ `subprocess`)
     - –ü—É—Ç—å –∫ UnRAR –±–µ—Ä–µ—Ç—Å—è –∏–∑ `UNRAR_TOOL` –∏–ª–∏ `WINRAR_PATH`
   - **7Z:** `_extract_7z_archive()`:
     - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `py7zr`

4. **–ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–º –∞—Ä—Ö–∏–≤–µ:**
   - –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫: `.xlsx`, `.xls`, `.docx`, `.doc`, `.pdf`
   - –ò—Å–∫–ª—é—á–∞—é—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `~$`)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π –∫ –Ω–∞–π–¥–µ–Ω–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º (`List[Path]`)

---

### 5. –ü–†–û–í–ï–†–ö–ê –ù–ê –°–û–í–ü–ê–î–ï–ù–ò–ï –§–†–ê–ó

**–§–∞–π–ª—ã:**
- `services/document_search/match_finder.py` - `MatchFinder`
- `services/document_search/keyword_matcher.py` - `extract_keywords()`, `check_keywords_match()`
- `services/document_search/document_search_base.py` - `search_document_for_products()`
- `services/document_search/additional_phrases.py` - `get_additional_search_phrases()`

**–ü—Ä–æ—Ü–µ—Å—Å:**

#### 5.1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ–∏—Å–∫–∞

1. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –ë–î:**
   - `DocumentSearchService.ensure_products_loaded()`:
     - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `products`
     - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `_product_names: List[str]`

2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤:**
   - `extract_keywords(product_name)` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞:
     - –£–¥–∞–ª—è–µ—Ç —Å—Ç–æ–ø-—Å–ª–æ–≤–∞ (–∞—Ä—Ç–∏–∫–ª–∏, –ø—Ä–µ–¥–ª–æ–≥–∏)
     - –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Ç–µ–∫—Å—Ç (lowercase, —É–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞–∫–æ–≤ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è)
     - –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —Å–ª–æ–≤–∞
     - –§–∏–ª—å—Ç—Ä—É–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–ª–æ–≤–∞ (< 3 —Å–∏–º–≤–æ–ª–æ–≤)
     - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ª–æ–≤–∞—Ä—å `{product_name: {keywords: [...], original: "..."}}`

#### 5.2. –ü–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ Excel

1. **–ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —è—á–µ–π–∫–∞–º:**
   - `ExcelParser.iter_workbook_cells()`:
     - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π –ª–∏—Å—Ç Excel
     - –ò—Ç–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ –≤—Å–µ–º —è—á–µ–π–∫–∞–º
     - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ —è—á–µ–π–∫–∏

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è:**
   - `check_keywords_match(cell_text, product_pattern)`:
     - **–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (100%):** –µ—Å–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞–π–¥–µ–Ω–æ –≤ —Ç–µ–∫—Å—Ç–µ
     - **–ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (85%):** –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ >= 85% –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
     - **–°–ª–∞–±–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (56%):** –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ >= 56% –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
     - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫ (`rapidfuzz`) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–µ—á–∞—Ç–æ–∫

3. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
   - `ExcelParser.extract_full_row_with_context()`:
     - –ü–æ–ª—É—á–∞–µ—Ç –≤—Å—é —Å—Ç—Ä–æ–∫—É —Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ–º
     - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–ª–µ–≤–∞ –∏ —Å–ø—Ä–∞–≤–∞ (—Å–æ—Å–µ–¥–Ω–∏–µ —Å—Ç–æ–ª–±—Ü—ã)
     - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–º–µ–Ω–∞ —Å—Ç–æ–ª–±—Ü–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ø–∏—Å–æ–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π —Å –ø–æ–ª—è–º–∏:
- `product_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- `score` - –ø—Ä–æ—Ü–µ–Ω—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (100, 85, 56)
- `sheet_name` - –∏–º—è –ª–∏—Å—Ç–∞
- `row` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏
- `column` - –±—É–∫–≤–∞ —Å—Ç–æ–ª–±—Ü–∞
- `cell_address` - –∞–¥—Ä–µ—Å —è—á–µ–π–∫–∏ (A1, B2, ...)
- `matched_text` - –Ω–∞–π–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- `matched_keywords` - –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
- `full_row` - –ø–æ–ª–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
- `left_context`, `right_context` - –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `column_names` - –∏–º–µ–Ω–∞ —Å—Ç–æ–ª–±—Ü–æ–≤

#### 5.3. –ü–æ–∏—Å–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—Ä–∞–∑

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—Ä–∞–∑:**
   - `get_additional_search_phrases()`:
     - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ—Ä–∞–∑ –∏–∑ –ë–î –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
     - –ü—Ä–∏–º–µ—Ä—ã: "—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ", "—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è", "—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è"

2. **–ü–æ–∏—Å–∫ –≤ Excel:**
   - `search_additional_phrases_in_excel()`:
     - –ò—Ç–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ –≤—Å–µ–º —è—á–µ–π–∫–∞–º
     - –ò—â–µ—Ç —Ç–æ—á–Ω–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ —Ñ—Ä–∞–∑—ã (case-insensitive)
     - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã

3. **–ü–æ–∏—Å–∫ –≤ PDF:**
   - `search_additional_phrases_in_pdf()`:
     - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ PDF
     - –ò—â–µ—Ç —Ñ—Ä–∞–∑—ã –≤ —Ç–µ–∫—Å—Ç–µ

4. **–ü–æ–∏—Å–∫ –≤ Word:**
   - `search_additional_phrases_in_word()`:
     - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ Word –¥–æ–∫—É–º–µ–Ω—Ç–∞
     - –ò—â–µ—Ç —Ñ—Ä–∞–∑—ã –≤ —Ç–µ–∫—Å—Ç–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—Ä–∞–∑

---

### 6. –ó–ê–ü–ò–°–¨ –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –í –ë–î

**–§–∞–π–ª—ã:**
- `services/tender_match_repository.py` - `TenderMatchRepository`
- `services/archive_runner/result_saver.py` - `ResultSaver`

**–ü—Ä–æ—Ü–µ—Å—Å:**

#### 6.1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

1. **–ü–æ–¥—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
   - `match_count` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (score >= 56%)
   - `match_percentage` - –ø—Ä–æ—Ü–µ–Ω—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤)
   - `exact_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (score >= 100)
   - `good_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–æ—Ä–æ—à–∏—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (85 <= score < 100)
   - `brown_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–±—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (56 <= score < 85)

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ "–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ/–Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ":**
   - `TenderMatchRepository.save_match_result()`:
     - **–ï—Å–ª–∏ `match_count == 0`** ‚Üí `is_interesting = False` (–Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ)
     - **–ï—Å–ª–∏ `match_percentage >= 85.0`** ‚Üí `is_interesting = True` (–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ)
     - **–ò–Ω–∞—á–µ** ‚Üí `is_interesting = False` (–Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ)

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É `tender_document_matches`:**
   ```sql
   INSERT INTO tender_document_matches (
       tender_id, registry_type, match_count, match_percentage,
       is_interesting, processing_time_seconds, total_files_processed, total_size_bytes
   ) VALUES (...)
   ```
   - –ï—Å–ª–∏ –∑–∞–ø–∏—Å—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (UPDATE)
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤, —Ä–∞–∑–º–µ—Ä

#### 6.2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

1. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π:**
   - –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å `score >= 56%`
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É `tender_document_match_details`:**
   ```sql
   INSERT INTO tender_document_match_details (
       match_id, product_name, score, sheet_name, row_index, column_letter,
       cell_address, source_file, matched_text, matched_display_text,
       matched_keywords, row_data
   ) VALUES (...)
   ```
   - `match_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `tender_document_matches`
   - `row_data` - JSON —Å –ø–æ–ª–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π, –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º, –∏–º–µ–Ω–∞–º–∏ —Å—Ç–æ–ª–±—Ü–æ–≤

#### 6.3. –†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ UI:
- `TenderMatchRepository.set_interesting_status()`:
  - `is_interesting = True` - –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ
  - `is_interesting = False` - –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ
  - `is_interesting = None` - —Å–±—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î, –≥–æ—Ç–æ–≤—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö

---

### 7. –§–û–†–ú–ò–†–û–í–ê–ù–ò–ï –ö–ê–†–¢–û–ß–ï–ö

**–§–∞–π–ª—ã:**
- `modules/bids/tender_list_widget.py` - `TenderListWidget`
- `modules/bids/tender_card.py` - `TenderCard`
- `modules/bids/tender_card_ui.py` - —Å–æ–∑–¥–∞–Ω–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–ü—Ä–æ—Ü–µ—Å—Å:**

#### 7.1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ç–æ—Ä–≥–æ–≤

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤ –∏–∑ –ë–î:**
   - `TenderLoader.load_new_tenders_44fz()` –∏–ª–∏ `load_new_tenders_223fz()`:
     - –í—ã–∑—ã–≤–∞–µ—Ç `TenderRepository._fetch_new_feed()`
     - –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã (–û–ö–ü–î, —Å—Ç–æ–ø-—Å–ª–æ–≤–∞, —Ä–µ–≥–∏–æ–Ω, –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
     - –ü–æ–ª—É—á–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ—Ä–≥–∞

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
   - `TenderListWidget.set_tenders()`:
     - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ—Ä–≥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç `TenderMatchRepository.get_match_summary()`
     - –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (exact_count, good_count, brown_count)

#### 7.2. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É

`TenderListWidget._get_tender_priority()` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:** –¢–æ–ª—å–∫–æ –∑–µ–ª–µ–Ω—ã–µ (100%) - `exact_count > 0, good_count == 0, brown_count == 0`
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:** –ó–µ–ª–µ–Ω—ã–µ + –∂–µ–ª—Ç—ã–µ (100% –∏ 85%+) - `exact_count > 0, good_count > 0`
3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3:** –ñ–µ–ª—Ç—ã–µ + —Å–µ—Ä—ã–µ (85%+ –∏ 56%+) - `exact_count == 0, good_count > 0`
4. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4:** –¢–æ–ª—å–∫–æ —Å–µ—Ä—ã–µ (56%+) - `brown_count > 0, exact_count == 0, good_count == 0`
5. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5:** –ù–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ - `match_summary is None`
6. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 6:** –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ - `error_reason is not None`

–¢–æ—Ä–≥–∏ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —ç—Ç–æ–º –ø–æ—Ä—è–¥–∫–µ.

#### 7.3. –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
   - `TenderCard.__init__()`:
     - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–æ—Ä–≥–∞ (`tender_data`)
     - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Ä–µ–µ—Å—Ç—Ä–∞ (`_determine_registry_type()`)
     - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç UI —á–µ—Ä–µ–∑ `init_ui()`

2. **–°–æ–∑–¥–∞–Ω–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤:**
   - `create_header_layout()` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –Ω–æ–º–µ—Ä–æ–º –∏ —á–µ–∫–±–æ–∫—Å–æ–º
   - `create_info_layout()` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
   - `create_price_date_layout()` - —Ü–µ–Ω–∞ –∏ –¥–∞—Ç—ã
   - `create_meta_layout()` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, —Ä–µ–≥–∏–æ–Ω)
   - `create_okpd_label()` - –∫–æ–¥—ã –û–ö–ü–î

3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏ –ø—Ä–µ–≤—å—é:**
   - `add_status_and_preview()`:
     - **–°—Ç–∞—Ç—É—Å:** `create_status_badges()` - –±–µ–π–¥–∂–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
       - –ó–µ–ª–µ–Ω—ã–π –±–µ–π–¥–∂: —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (100%)
       - –ñ–µ–ª—Ç—ã–π –±–µ–π–¥–∂: —Ö–æ—Ä–æ—à–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (85%+)
       - –°–µ—Ä—ã–π –±–µ–π–¥–∂: —Å–ª–∞–±—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (56%+)
     - **–ü—Ä–µ–≤—å—é:** `create_matches_preview()` - –ø—Ä–µ–≤—å—é –ø–µ—Ä–≤—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
       - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ —á–µ—Ä–µ–∑ `fetch_match_details_with_cache()`
       - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 3-5 —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π —Å —Ü–≤–µ—Ç–∞–º–∏ –ø–æ score

4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
   - `_match_summary_cache` - –∫—ç—à —Å–≤–æ–¥–∫–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
   - `_match_details_cache` - –∫—ç—à –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
   - –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏

#### 7.4. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É "–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ/–Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ"

**–í–ê–ñ–ù–û:** –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ SQL –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ —Ç–æ—Ä–≥–æ–≤:

1. **–ü—Ä–∏ –ø–µ—Ä–≤–∏—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ (`set_tenders()`):**
   - SQL –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ `TenderQueryBuilder.build_is_interesting_filter()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç —Ç–æ—Ä–≥–∏ —Å `is_interesting = FALSE`
   - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ (`is_interesting = TRUE`) –∏–ª–∏ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ (`is_interesting IS NULL`) —Ç–æ—Ä–≥–∏

2. **–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ (`update_tenders()`):**
   - ‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ê:** –ú–µ—Ç–æ–¥ `update_tenders()` –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ —Å—Ç–∞–ª –ª–∏ —Ç–æ—Ä–≥ –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ï—Å–ª–∏ —Ç–æ—Ä–≥ –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∏ –ø–æ–ª—É—á–∏–ª —Å—Ç–∞—Ç—É—Å `is_interesting = FALSE`, –æ–Ω –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∫–∞—Ä—Ç–æ—á–µ–∫
   - **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω—É–∂–Ω–æ –ª–∏–±–æ:
     - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `set_tenders()` –≤–º–µ—Å—Ç–æ `update_tenders()` (–ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π)
     - –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ `update_tenders()` –∏ —É–¥–∞–ª—è—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞—Ä—Ç–æ—á–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É. **–ù–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ç–æ—Ä–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏—Å–∫–ª—é—á–µ–Ω—ã, –Ω–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–æ–≥—É—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ.**

---

## üîç –ü–†–û–í–ï–†–ö–ê –ù–ê –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –ú–ï–¢–û–î–û–í

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **`set_dialog_size()` –∏ `set_window_size()`:**
   - `modules/styles/ui_config.py` - —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞
   - **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:** –§—É–Ω–∫—Ü–∏–∏ –∏ –º–µ—Ç–æ–¥—ã –¥–µ–ª–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ
   - **–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–∏, —É–¥–∞–ª–∏—Ç—å –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞

2. **`fetch_match_summary()` –∏ `fetch_match_details()`:**
   - `modules/bids/tender_card_data.py` - –ø—Ä—è–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
   - `modules/bids/tender_card_data_fetch.py` - —Ñ—É–Ω–∫—Ü–∏–∏ —Å –∫—ç—à–µ–º
   - **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:** –î–≤–µ –≤–µ—Ä—Å–∏–∏ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ —Ñ—É–Ω–∫—Ü–∏–π
   - **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Å–∏—é —Å –∫—ç—à–µ–º, —É–¥–∞–ª–∏—Ç—å –ø—Ä—è–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

3. **`extract_text()`:**
   - `services/document_search/document_parser.py` - –¥–ª—è Word
   - `services/document_search/pdf_processor.py` - –¥–ª—è PDF
   - `services/document_search/word_processor.py` - –¥–ª—è Word
   - **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ú–µ—Ç–æ–¥—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∏–º–µ–Ω–µ–º –≤ —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞—Å—Å–∞—Ö
   - **–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ä–∞–∑–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

4. **`search_additional_phrases_in_excel()` –∏ `search_additional_phrases_in_pdf()`:**
   - `services/document_search/excel_additional_phrases.py`
   - `services/document_search/pdf_search.py`
   - **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–æ—Ö–æ–∂–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ —Ñ—Ä–∞–∑
   - **–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

---

## üìä –°–•–ï–ú–ê –ü–û–¢–û–ö–ê –î–ê–ù–ù–´–•

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí BidsWidget ‚Üí DocumentProcessor ‚Üí run_document_processing.py
                                                      ‚Üì
                                    ArchiveBackgroundRunner.run()
                                                      ‚Üì
                                    TenderProvider.get_target_tenders()
                                                      ‚Üì
                                    TenderRepository._fetch_new_feed()
                                                      ‚Üì
                                    TenderProcessor.process_tender()
                                                      ‚Üì
                                    DocumentDownloader.download_document()
                                                      ‚Üì
                                    ArchiveExtractor.extract_archive()
                                                      ‚Üì
                                    MatchFinder.search_workbook_for_products()
                                                      ‚Üì
                                    TenderMatchRepository.save_match_result()
                                                      ‚Üì
                                    TenderMatchRepository.save_match_details()
                                                      ‚Üì
                                    TenderListWidget.set_tenders()
                                                      ‚Üì
                                    TenderCard (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏)
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ú–û–ú–ï–ù–¢–´

1. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
   - `TenderMatchRepository.acquire_tender_lock()` - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ–¥–Ω–æ–≥–æ —Ç–æ—Ä–≥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL advisory locks

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   - –ë–∞—Ç—á-–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
   - –ö—ç—à —Å–≤–æ–¥–∫–∏ –∏ –¥–µ—Ç–∞–ª–µ–π —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `file_processing_errors.log`
   - –û—à–∏–±–∫–∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `ErrorLogger`
   - –û—à–∏–±–∫–∏ –ø–æ–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

4. **–û—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤:**
   - `FileCleaner` —É–¥–∞–ª—è–µ—Ç –∞—Ä—Ö–∏–≤—ã –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏
   - –£–¥–∞–ª—è–µ—Ç Excel —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

5. **–°—Ç–∞—Ç—É—Å "–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ/–Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ":**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
     - `match_count == 0` ‚Üí `is_interesting = False` (–Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ)
     - `match_percentage >= 85.0` ‚Üí `is_interesting = True` (–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ)
     - –ò–Ω–∞—á–µ ‚Üí `is_interesting = False` (–Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ)
   - –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ UI
   - **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ SQL:** –¢–æ—Ä–≥–∏ —Å `is_interesting = FALSE` –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ `NOT EXISTS`

6. **‚ö†Ô∏è –ò–ó–í–ï–°–¢–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤:**
   - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–û–±–Ω–æ–≤–∏—Ç—å –ª–µ–Ω—Ç—É" –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `update_tenders()`, –∫–æ—Ç–æ—Ä—ã–π –ù–ï —É–¥–∞–ª—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤
   - –ï—Å–ª–∏ —Ç–æ—Ä–≥ –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∏ –ø–æ–ª—É—á–∏–ª —Å—Ç–∞—Ç—É—Å `is_interesting = FALSE`, –æ–Ω –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
   - **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `set_tenders()` –≤–º–µ—Å—Ç–æ `update_tenders()` –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏, –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ `update_tenders()`

